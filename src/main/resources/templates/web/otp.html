<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <meta charset="UTF-8">
    <title layout:fragment="pageTitle">Xác thực OTP | SkyLand</title>

    <style>
        .auth-card {
            max-width: 520px;
            margin: 64px auto;
            background: #25b45b;
            color: #fff;
            border-radius: 18px;
            box-shadow: 0 12px 28px rgba(0,0,0,.12);
            padding: 36px 32px 28px;
        }
        .auth-title { font-weight: 800; letter-spacing: .6px; text-transform: uppercase; text-align: center; margin-bottom: 6px; }
        .auth-subtitle { opacity: .85; text-align: center; margin-bottom: 22px; }
        .auth-form .form-label { color: #e9fff3; font-weight: 600; }
        .otp-input {
            letter-spacing: 8px; text-align: center; font-weight: 700; font-size: 20px;
            background:#fff; border:none; border-radius:12px; padding:14px 12px;
            box-shadow: inset 0 4px 10px rgba(0,0,0,.06);
        }
        .auth-btn {
            background:#fff; color:#1b9a4a; border:none;
            width:100%; padding:12px; border-radius:10px; font-weight:700;
            transition: transform .04s ease, box-shadow .2s ease;
        }
        .auth-btn:hover { box-shadow: 0 10px 18px rgba(0,0,0,.16); }
        .auth-btn:active { transform: translateY(1px); }
        .auth-footer { text-align:center; opacity:.9; margin-top:12px; }
        .auth-footer button { color:#eafff5; font-weight:700; background:transparent; border:none; text-decoration: underline; }
        .auth-alert { border:none; border-radius:12px; padding:10px 12px; background: rgba(255,255,255,.18); color:#fff; }
    </style>
</head>

<body>
<main layout:fragment="content" class="page-wrapper">
    <div class="auth-card">
        <h3 class="auth-title">Xác thực OTP</h3>
        <p class="auth-subtitle">Mã xác thực đã được gửi đến email của bạn</p>

        <div th:if="${param.error}" class="auth-alert mb-3">
            Mã OTP không hợp lệ hoặc đã hết hạn. Vui lòng thử lại.
        </div>

        <form class="auth-form" th:action="@{/auth/verify-otp}" method="post">
            <input type="hidden" name="key" th:value="${key}">
            <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>

            <div class="mb-4">
                <label class="form-label">Nhập mã OTP (6 số)</label>
                <input name="otp" maxlength="6" pattern="[0-9]{6}" class="form-control otp-input" placeholder="— — — — — —" required>
            </div>

            <button class="auth-btn">Xác nhận</button>
        </form>

        <div class="auth-footer mt-3">
            Không nhận được mã?
            <form th:action="@{/auth/otp/send/email}" method="post" class="d-inline">
                <input type="hidden" name="email" th:value="${key}">
                <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>
                <button type="submit">Gửi lại OTP</button>
            </form>
        </div>
    </div>
</main>
</body>
</html>
